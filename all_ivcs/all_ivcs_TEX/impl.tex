\section{Implementation \& Evaluation}
\label{sec:impl} 
\subsection{Implementation}
We have implemented the \aivcalg ~algorithm
in an industrial model checker called \texttt{JKind} ~\cite{jkind},
which is for verifying safety properties of  infinite-state synchronous systems.
It accepts Lustre programs \cite{Halbwachs91:lustre}
written over the theory of linear integer and real arithmetic.
Verification is based on K-induction and property directed reachability (PDR) using a back-end SMT solver.
In the
back-end, \texttt{JKind} supports \texttt{Z3}~\cite{DeMoura08:z3},
\texttt{Yices}~\cite{Dutertre06:yices}, \texttt{MathSAT}~\cite{Cimatti2013:MathSAT},
\texttt{SMTInterpol}~\cite{Christ2012:SMTInterpol}, and \texttt{CVC4} \cite{barrett2011cvc4}. \texttt{JKind} is a multi-engine model checker that works on multiple properties simultaneously. When a property is
proven and IVC generation is enabled, an additional parallel engine
executes the \ucalg ~algorithm \cite{Ghass16} to generate an (approximately) minimal IVC. To implement our method, we have made use of this engine and also extended \texttt{JKind} with a new engine that
implements Algorithm \ref{alg:aivc} on top of \texttt{Z3}.
%The source code is publicly available on \cite{mygit}.

One technical issue that needs to
be handled in any implementation of the \aivcalg ~algorithm,
is about the undecidability of the model checking algorithms;
in each iteration of the \texttt{while} loop, Algorithm~\ref{alg:aivc}
has to decide on the adequacy of a given set $M \subseteq T$ (line 8).
This decision should be made by the use of a proof method that
tries to prove the property $P$ over $M$. Although we know that $(I, T) \vdash P$,
there is no guarantee that we can determine whether or not any $M \subset T$ is adequate.
Therefore, in practice, we have to set some boundaries
(over depth/time of the model checking algorithm) in each iteration.
In our implementation, we set a timeout based on the time a property takes to be proved.
Since before starting the \aivcalg ~algorithm, the property has to be proved,
we obtain its required \emph{proof-time}.
Then, the timeout we set for each iteration is ($60 sec  + 10 \times$ \emph{proof-time}).
When the \texttt{while} loop times out for $M$ in line 8 of Algorithm~\ref{alg:aivc},
we treat $M$ as an \emph{inadequate} set because
when the adequacy of $M$ is undecidable,
 the adequacy of all its subsets are undecidable too. So, if we consider it as inadequate, line 13 will prune off $M$ and all its subsets from the search space. \ela{~~Ela: do you have better justification? }
In our benchmarks, there have been several models from~\cite{Hagen08:FMCAD} containing iterations with timeout.



%The source code is publicly available on \cite{mygit}.
%This section points out some technical issues in the implementation.
%
%We have extended \texttt{JKind} with a new engine that
% implements Algorithm \ref{alg:aivc}.
% First a property is proved and a single IVC set $S$ is computed
% by the IVC generation engine. Then, the set $S$ is sent to our engine.
% For efficiency, instead of initializing $map$ with $\top$,
% we initialize $map$ with $\bigvee_{T_{i}\in S} \neg {\actlit (T_i)}$,
% which prunes off set $S$ and all its supersets from $\mathcal{P}(T)$ at the beginning of the algorithm. If $S$ is minimal, then chances are a large
% subset of  $\mathcal{P}(T)$ is marked as explored even before
% the algorithm starts the search.

\input{experiments} 
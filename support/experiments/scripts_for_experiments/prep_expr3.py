# This is to gather xml files generated by the first experiment in order to give them to JSupport as -use_unsat_core

__author__ = "Elaheh"
__date__ = "$Mar 10, 2016 9:14:40 AM$"
 
import os, sys, shutil


RESULTS_DIR = 'results1'
TIMEOUT_DIR = os.path.join('timedout1', 'timedout_results')
INFO = 'timeout_info.txt'
OUTPUT_DIR = 'input_for_expr3'
BASE_SET = 'yices_both.xml'

if not os.path.exists(RESULTS_DIR):
    print(RESULTS_DIR + " does not exists!")
    sys.exit(-1)
    
if not os.path.exists(TIMEOUT_DIR):
    print(TIMEOUT_DIR + " does not exists!")
    sys.exit(-1)    
    
os.mkdir(OUTPUT_DIR)

#
# Gather results
#

for dir in os.listdir(RESULTS_DIR):
    shutil.copy (os.path.join(RESULTS_DIR, dir, BASE_SET), os.path.join(OUTPUT_DIR, dir + ".xml"))

for dir in os.listdir(TIMEOUT_DIR):
    t = 0
    reader = open(os.path.join(TIMEOUT_DIR, dir, INFO))
    for line in reader.readlines():
        if "timeouts =" not in line:
            t += 1
    reader.close() 
    if t <= 4:
        shutil.copy (os.path.join(TIMEOUT_DIR, dir, BASE_SET), os.path.join(OUTPUT_DIR, dir + ".xml"))

    

